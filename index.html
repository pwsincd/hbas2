<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homebrew App Store</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
      WebFont.load({
        google: {
          families: ["Open Sans:400,700"]
        }
      });
    </script>
    <script src="js/libs.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="app">
      <!-- navbar -->
      <nav class="navBar">
        [logo]
        <ul class="navBar__links">
          <li>
            <a href="https://kiwiirc.com/client/irc.kiwiirc.com/wiiubru">IRC</a>
          </li>
          <li>
            <a href="http://forum.wiiubru.com">Forum</a>
          </li>
          <li>
            <a href="http://www.wiiubru.com/appstore/stats/index.html">Stats</a>
          </li>
          <li>
            <a href="https://www.paypal.me/pwsincd">Donate</a>
          </li>
        </ul>
        <a class="mobileNavToggle" v-on:click="toggleSideMenu"><i class="fa fa-bars"></i></a>
      </nav>
      <!-- / navbar -->
      <!-- side menu -->
      <div :class="['sideMenu', sideMenuIsOpen ? 'is-open' : '']">
        <ul class="categoryList">
          <li class="category">
            <router-link to="/" exact>
              <span class="category__icon"><i class="fa fa-home"></i></span><span class="category__title">top</span>
            </router-link>
          </li>
          <li class="category">
            <router-link to="/search/">
              <span class="category__icon"><i class="fa fa-search"></i></span><span class="category__title">search</span>
            </router-link>
          </li>
          <li v-for="category in categories" :class="['category', 'category--' + category.id]">
            <router-link :to="'/category/' + category.id">
              <span class="category__icon"><i :class="['fa', category.icon]"></i></span><span class="category__title">{{category.id}}</span>
            </router-link>
          </li>
        </ul>
      </div>
      <!-- / side menu -->
      <!-- main page content -->
      <div class="main">
        <router-view></router-view>
        <footer>&copy; 2016 wiiubru.com. Homebrew App Store webpage design &amp; code by <a href="https://github.com/jaames">Jaames</a></footer>
      </div>
      <!-- / main page content -->
      <!-- advert space -->
      <div class="adSpace">
        <!-- I've allowed the space for adverts here, dimensions should be 256px wide, whatever height you choose c: -->
      </div>
      <!-- advert space -->
    </div>

    <!-- front page template -->
    <script type="text/x-template" id="front-page-template">
      <div>
        <app-grid v-for="category in appList" v-bind:title="category.title" v-bind:items="category.items" showButtons="true"></app-grid>
      </div>
    </script>
    <!-- / front page template -->

    <!-- category page template -->
    <script type="text/x-template" id="category-page-template">
      <app-grid v-bind:title="appList.title" v-bind:items="appList.items"></app-grid>
    </script>
    <!-- / category page template -->

    <!-- search page template -->
    <script type="text/x-template" id="search-page-template">
      <div>
        <form class="searchField" v-on:submit="submitQuery">
          <div class="searchField__input-wrap">
            <input action="" method="" type="text" v-model="searchQuery" class="searchField__input">
          </div>
          <div class="searchField__button-wrap">
            <button type="submit" class="searchField__button button button--secondary">Search</button>
          </div>
        </form>
        <app-grid v-bind:items="appList.items"></app-grid>
      </div>
    </script>
    <!-- / search page template -->

    <!-- app page template -->
    <script type="text/x-template" id="app-page-template">
      <div class="card appPage" v-show="app">
        <div class="leftSection">
          <img class="app__image" v-bind:src="app.img_src"></img>
          <div class="app__actionWrap">
            <div class="app__action">
              <a v-bind:href="download_link" v-bind:download="app.directory + '.zip'" class="button button--block">Download</a>
            </div>
            <div class="app__action">
              <a v-bind:href="app.url" target="_blank" rel="noopener noreferrer" class="button button--block button--secondary">Source</a>
            </div>
          </div>
        </div>
        <div class="rightSection">
          <h3 class="app__title">{{app.name}}</h3>
          <div class="app__desc">{{app.desc}}</div>
          <div class="app__authors">{{app.author}}</div>
          <span :class="['app__type', 'app__type--' + app.type]">{{app.type}}</span>
          <div class="app__longDesc" v-html="formatted_desc"></div>
        </div>
    </div>
    </script>
    <!-- / app page template -->

    <!-- app grid template -->
    <script type="text/x-template" id="app-grid-template">
      <div v-bind:class="['category', title ? 'category--' + title : '']">
        <div v-if="title" class="appGridHead">
          <router-link :to="'/category/' + title">
            <a class="appGridHead__title">{{title}}</a>
          </router-link>
          <router-link v-if="showButtons" :to="'/category/' + title">
            <a class="button appGridHead__button">Show all</a>
          </router-link>
        </div>
        <ul class="appGrid">
          <li v-for="app in items" class="appGrid__item">
            <router-link :to="'/app/' + app.directory">
              <a class="card card--app">
                <img class="app__image" v-bind:src="app.img_src">
                <div class="card__head">{{app.name}}</div>
                <div class="card__body">
                  <div class="app__desc">{{app.desc}}</div>
                  <div class="app__author">{{app.author}}</div>
                </div>
              </a>
            </router-link>
          </li>
        </ul>
      </div>
    </script>
    <!-- / app grid template -->

    <!-- config -->
    <script type="text/javascript">
      var config = {
        categories: [
          {
            id: "loaders",
            json_id: "loader",
            icon: "fa-spinner"
          }, {
            id: "games",
            json_id: "game",
            icon: "fa-play"
          }, {
            id: "emulators",
            json_id: "emu",
            icon: "fa-gamepad"
          }, {
            id: "tools",
            json_id: "tool",
            icon: "fa-cog"
          }, {
            id: "concepts",
            json_id: "poc",
            icon: "fa-lightbulb-o"
          },
        ],
        appListURL: "demo/demo_apps.json",
        getAppImageURL: function (directory) {
          return "http://www.wiiubru.com/appstore/apps/" + directory + "/icon.png"
        },
        getAppDownloadURL: function (directory, binary) {
          return "http://www.wiiubru.com/appstore/zips/" + directory + ".zip"
        },
      };
    </script>
    <!-- / config -->
    <script src="js/main.min.js"></script>
  </body>
</html>
